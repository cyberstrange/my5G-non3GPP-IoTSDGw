 package main

import (
    "encoding/hex"
    "fmt"
    "net"
    "os"
    "time"
)

/* A Simple function to verify error */
func checkError(err error) {
    if err  != nil {
        fmt.Println("Error: " , err)
        os.Exit(0)
    }
}

func main() {

s :="0205f50000000000000000017b227278706b223a5b7b2274696d65223a22323032312d30322d31375430383a30383a33302d30333a3030222c22746d6d73223a393232333337323839302c22746d7374223a393232333337322c226368616e223a302c2272666368223a312c2266726571223a3931362e382c2273746174223a312c226d6f6475223a224c4f5241222c2264617472223a225346374257313235222c22636f6472223a22342f35222c2272737369223a2d35372c226c736e72223a372c2273697a65223a31342c2264617461223a22514145414141414141674143347841393846383d227d5d7d"

data, err := hex.DecodeString(s)

s="0245f40000000000000000017b227278706b223a5b7b2274696d65223a22323032312d30322d31375430383a31303a33342d30333a3030222c22746d6d73223a393232333337323839302c22746d7374223a393232333337322c226368616e223a302c2272666368223a312c2266726571223a3931362e382c2273746174223a312c226d6f6475223a224c4f5241222c2264617472223a225346374257313235222c22636f6472223a22342f35222c2272737369223a2d35372c226c736e72223a372c2273697a65223a31342c2264617461223a225141494141414141425141437a4779716849383d227d5d7d"

data1, err := hex.DecodeString(s)

s="0274410000000000000000017b2273746174223a7b2274696d65223a22323032312d30322d31372031313a31393a343920474d54222c226c617469223a2d32392e37393434342c226c6f6e67223a2d35312e31353338392c22616c7469223a32382c2272786e62223a302c2272786f6b223a302c2272786677223a302c2261636b72223a302e302c2264776e62223a302c2274786e62223a307d7d"

data2, err := hex.DecodeString(s)

    stringAddrGW := ":1680"
    serverAddr,err := net.ResolveUDPAddr("udp", stringAddrGW)
    checkError(err)

    conn, err := net.DialUDP("udp",nil, serverAddr)
    checkError(err)
    
    for{
        _,err := conn.Write(data)
        checkError(err)
        fmt.Printf("Data %s was sent \n", data)

        //registerData := make([]byte,2048)
        //n, remoteAddr, err := conn.ReadFromUDP(registerData)
        //checkError(err)
        //fmt.Printf("Data %s was received from %s\n", registerData[:n], remoteAddr)

        _,err = conn.Write(data1)
        checkError(err)
        fmt.Printf("Data %s was sent \n", data1)


        _,err = conn.Write(data2)
        checkError(err)
        fmt.Printf("Data %s was sent \n", data2)
        time.Sleep(5 * time.Second)
    }
}

